{"version":3,"file":"js/src_views_AdminNotifications_vue.js","mappings":"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","sources":["webpack://protezione-civile/./src/views/AdminNotifications.vue?8c1f","webpack://protezione-civile/./src/views/AdminNotifications.vue?4cc8","webpack://protezione-civile/./src/services/AdminService.ts","webpack://protezione-civile/./src/services/NotificationService.ts","webpack://protezione-civile/./src/views/AdminNotifications.vue?8602","webpack://protezione-civile/./src/views/AdminNotifications.vue","webpack://protezione-civile/./src/views/AdminNotifications.vue?b2b0","webpack://protezione-civile/./src/views/AdminNotifications.vue?6e84","webpack://protezione-civile/./src/views/AdminNotifications.vue?e0e6","webpack://protezione-civile/./src/views/AdminNotifications.vue?22bd"],"sourcesContent":["\nimport { defineComponent } from \"vue\";\nimport { NotificationService } from \"@/services/NotificationService\";\nimport { Message } from \"@/model/FcmMessage\";\nimport { AdminService } from \"@/services/AdminService\";\n\nexport default defineComponent({\n  data() {\n    const message: { topic?: string; title?: string; description?: string } =\n      {};\n    const topics: string[] = [];\n    return { message, topics, selectedTopic: topics[0], loading: false };\n  },\n  async mounted() {\n    this.topics = await new AdminService().getAllTopics();\n  },\n  methods: {\n    hasMandatoryFields() {\n      return (\n        this.selectedTopic && this.message.title && this.message.description\n      );\n    },\n    async sendPushNotification() {\n      if (this.hasMandatoryFields()) {\n        this.loading = true;\n        const msg: Message = {\n          topic: this.selectedTopic,\n          webpush: {\n            notification: {\n              title: this.message.title,\n              body: this.message.description,\n              icon: \"https://app.protezioneciviletricarico.com/img/icons/android-chrome-192x192.png\",\n              color: \"#7e55c3\",\n              badge:\n                \"https://app.protezioneciviletricarico.com/img/icons/android-chrome-192x192.png\",\n              // actions: [{ action: \"goTo\", title: \"Prova\" }],\n            },\n          },\n        };\n        await new NotificationService().sendNotification(msg);\n        this.loading = false;\n      }\n    },\n  },\n});\n","import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-beb795da\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"notifications\" }\nconst _hoisted_2 = { class: \"notification\" }\nconst _hoisted_3 = {\n  class: \"desc\",\n  name: \"title\"\n}\nconst _hoisted_4 = {\n  class: \"desc\",\n  name: \"desctiption\"\n}\nconst _hoisted_5 = {\n  class: \"desc\",\n  name: \"topic\"\n}\nconst _hoisted_6 = { class: \"topics_list\" }\nconst _hoisted_7 = [\"selected\", \"onClick\"]\nconst _hoisted_8 = [\"disabled\", \"loading\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, _toDisplayString(_ctx.$t.title), 1 /* TEXT */),\n      _createElementVNode(\"div\", {\n        class: \"input\",\n        contenteditable: \"true\",\n        inputmode: 'text',\n        onInput: _cache[0] || (_cache[0] = ($event: any) => (_ctx.message.title = $event.target.innerText))\n      }, null, 32 /* HYDRATE_EVENTS */),\n      _createElementVNode(\"div\", _hoisted_4, _toDisplayString(_ctx.$t.description), 1 /* TEXT */),\n      _createElementVNode(\"div\", {\n        class: \"input\",\n        contenteditable: \"true\",\n        inputmode: 'text',\n        onInput: _cache[1] || (_cache[1] = ($event: any) => (_ctx.message.description = $event.target.innerText))\n      }, null, 32 /* HYDRATE_EVENTS */)\n    ]),\n    _createElementVNode(\"div\", _hoisted_5, _toDisplayString(_ctx.$t.topic), 1 /* TEXT */),\n    _createElementVNode(\"div\", _hoisted_6, [\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.topics, (topic) => {\n        return (_openBlock(), _createElementBlock(\"div\", {\n          class: \"topic\",\n          key: topic,\n          selected: _ctx.selectedTopic === topic,\n          onClick: () => (_ctx.selectedTopic = _ctx.selectedTopic === topic ? '' : topic)\n        }, _toDisplayString(topic), 9 /* TEXT, PROPS */, _hoisted_7))\n      }), 128 /* KEYED_FRAGMENT */)),\n      _createElementVNode(\"div\", {\n        class: \"topic new_topic_button\",\n        onClick: _cache[2] || (_cache[2] = () => this.$router.push('/admin/notifications/newTopic'))\n      }, _toDisplayString(_ctx.$t.newTopic), 1 /* TEXT */)\n    ]),\n    _createElementVNode(\"div\", {\n      class: \"submit_button\",\n      onClick: _cache[3] || (_cache[3] = \n//@ts-ignore\n(...args) => (_ctx.sendPushNotification && _ctx.sendPushNotification(...args))),\n      disabled: !_ctx.hasMandatoryFields(),\n      loading: _ctx.loading\n    }, _toDisplayString(_ctx.loading ? _ctx.$t.sendingNotification : _ctx.$t.sendNotification), 9 /* TEXT, PROPS */, _hoisted_8)\n  ]))\n}","import { User } from \"@/model/User\";\nimport { FirebaseDBService } from \"./FirebaseDBService\"\n\nexport class AdminService {\n\n    private db: FirebaseDBService;\n    // private store: Store<RootState>;\n\n    constructor() {\n        this.db = new FirebaseDBService();\n        // this.store = store;\n    }\n\n    async getAllUsers() {\n        const res = await this.db.readData<{ [uid: string]: User }>('users');\n        const users = [];\n        if (res) {\n            for (const uid in res) {\n                const user = { ...res[uid], uid };\n                users.push(user);\n            }\n        }\n        return users;\n    }\n\n    async getAllTopics() {\n        const res = await this.db.readData<{ [topic: string]: true }>('notifications/topics');\n        if (res) {\n            return Object.keys(res);\n        }\n        return [];\n    }\n\n    async getAllRoles(): Promise<{ [role: string]: string[]; }> {\n        const roles = await this.db.readData<{ [role: string]: Permission }>('permissions');\n        const formattedRoles: { [role: string]: string[] } = {};\n        if (roles) {\n            for (const role in roles) {\n                formattedRoles[role] = Object.keys(roles[role]);\n            }\n        }\n        return formattedRoles;\n    }\n\n    getTokensFromUsers(users: User[]) {\n        return users.flatMap((user) => {\n            if (user.notificationTokens) {\n                return Object.keys(user.notificationTokens);\n            }\n        });\n    }\n\n    async saveTopic(topic: string, tokens: string[]) {\n        const topicObj: { [topic: string]: true } = tokens.reduce(\n            (tObj: { [topic: string]: true }, t) => ({ ...tObj, [t]: true }), {}\n        );\n        this.db.writeData<{ [topic: string]: true }>(`notifications/topics/${topic}`, topicObj);\n    }\n\n}\n\nexport type Permission = {\n    [uid: string]: true;\n}\n","import { Message } from \"@/model/FcmMessage\";\n\nexport class NotificationService {\n\n    async sendNotification(message: Message) {\n        const myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/json\");\n\n        const raw = JSON.stringify(message);\n\n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n        };\n\n        const res = await fetch(\"https://unruffled-liskov-633292.netlify.app/.netlify/functions/send\", requestOptions);\n        return await res.json();\n        \n    }\n    \n    async addToTopic(tokens: string[], topic: string) {\n        const myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        \n        const raw = JSON.stringify({tokens, topic});\n        \n        const requestOptions = {\n            method: 'POST',\n            headers: myHeaders,\n            body: raw,\n        };\n        \n        const res = await fetch(\"https://unruffled-liskov-633292.netlify.app/.netlify/functions/addToTopic\", requestOptions);\n        return await res.json();\n    }\n}","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#notifications[data-v-beb795da] {\\n  display: flex;\\n  flex-direction: column;\\n}\\n#notifications .desc[data-v-beb795da] {\\n  margin: 4px;\\n  font-weight: 500;\\n  align-self: flex-start;\\n}\\n#notifications .notification[data-v-beb795da] {\\n  display: flex;\\n  flex-direction: column;\\n}\\n#notifications .input[data-v-beb795da] {\\n  border: 1px #2c3e50 solid;\\n  border-radius: 8px;\\n  padding: 8px;\\n  margin: 6px;\\n  text-align: start;\\n  -webkit-appearance: none;\\n  outline: none;\\n}\\n#notifications .topics_list[data-v-beb795da] {\\n  display: flex;\\n  flex-wrap: wrap;\\n}\\n#notifications .topics_list .topic[data-v-beb795da] {\\n  border: 1px #2c3e50 solid;\\n  border-radius: 8px;\\n  padding: 8px;\\n  margin: 6px;\\n  cursor: pointer;\\n}\\n#notifications .topics_list .topic[selected=true][data-v-beb795da] {\\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\\n  z-index: 2;\\n  border: 1px #0047bb solid;\\n  background-color: #0047bb;\\n  color: #f0fbff;\\n}\\n#notifications .topics_list .new_topic_button[data-v-beb795da] {\\n  border: 1px grey dashed;\\n}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import { render } from \"./AdminNotifications.vue?vue&type=template&id=beb795da&scoped=true&ts=true\"\nimport script from \"./AdminNotifications.vue?vue&type=script&lang=ts\"\nexport * from \"./AdminNotifications.vue?vue&type=script&lang=ts\"\n\nimport \"./AdminNotifications.vue?vue&type=style&index=0&id=beb795da&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/TomaccioD/Documents/other/protezione-civile/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-beb795da\"],['__file',\"src/views/AdminNotifications.vue\"]])\n/* hot reload */\nif (module.hot) {\n  __exports__.__hmrId = \"beb795da\"\n  const api = __VUE_HMR_RUNTIME__\n  module.hot.accept()\n  if (!api.createRecord('beb795da', __exports__)) {\n    api.reload('beb795da', __exports__)\n  }\n  \n  module.hot.accept(\"./AdminNotifications.vue?vue&type=template&id=beb795da&scoped=true&ts=true\", () => {\n    api.rerender('beb795da', render)\n  })\n\n}\n\n\nexport default __exports__","export { default } from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[1]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./AdminNotifications.vue?vue&type=script&lang=ts\"; export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[1]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./AdminNotifications.vue?vue&type=script&lang=ts\"","export * from \"-!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[1]!../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./AdminNotifications.vue?vue&type=template&id=beb795da&scoped=true&ts=true\"","export * from \"-!../../node_modules/vue-style-loader/index.js??clonedRuleSet-22.use[0]!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./AdminNotifications.vue?vue&type=style&index=0&id=beb795da&lang=scss&scoped=true\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./AdminNotifications.vue?vue&type=style&index=0&id=beb795da&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3883864f\", content, false, {\"sourceMap\":false,\"shadowMode\":false});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./AdminNotifications.vue?vue&type=style&index=0&id=beb795da&lang=scss&scoped=true\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-22.use[1]!../../node_modules/vue-loader/dist/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-22.use[2]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-22.use[3]!../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./AdminNotifications.vue?vue&type=style&index=0&id=beb795da&lang=scss&scoped=true\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}"],"names":["defineComponent","NotificationService","AdminService","data","message","topics","selectedTopic","loading","mounted","getAllTopics","methods","hasMandatoryFields","title","description","sendPushNotification","msg","topic","webpush","notification","body","icon","color","badge","sendNotification","toDisplayString","_toDisplayString","createElementVNode","_createElementVNode","renderList","_renderList","Fragment","_Fragment","openBlock","_openBlock","createElementBlock","_createElementBlock","pushScopeId","_pushScopeId","popScopeId","_popScopeId","_withScopeId","n","_hoisted_1","id","_hoisted_2","class","_hoisted_3","name","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","render","_ctx","_cache","$props","$setup","$data","$options","$t","contenteditable","inputmode","onInput","$event","target","innerText","key","selected","onClick","$router","push","newTopic","args","disabled","sendingNotification","FirebaseDBService","constructor","db","getAllUsers","res","readData","users","uid","user","Object","keys","getAllRoles","roles","formattedRoles","role","getTokensFromUsers","flatMap","notificationTokens","saveTopic","tokens","topicObj","reduce","tObj","t","writeData","myHeaders","Headers","append","raw","JSON","stringify","requestOptions","method","headers","fetch","json","addToTopic"],"sourceRoot":""}